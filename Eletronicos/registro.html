include "db_connect.php";

<!DOCTYPE html>
<html lang='pt-BR'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>

  <title>Registro - CloverTech</title>

<style>
body {
  background:#0d0d0d;
  color:#eaeaea;
  font-family:Segoe UI;
  padding:20px
  } 
.box {
  max-width:380px;
  margin:60px auto;
  background:#111;
  padding:20px;
  border-radius:12px;
  border:1px solid #00ffff33
  }
input {
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:8px;
  border:2px solid #00ffff;
  background:#0d0d0d;
  color:#00ffff
  }
button {
  width:100%;
  padding:10px;
  background:#00ffff;
  color:#0d0d0d;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:700
  }

</style>
</head>
<body>

<div class='box'>

<h2 style='color:#00ffff;text-align:center'>Criar Conta</h2>

<input id='nome' placeholder='Nome completo'>
<input id='email' placeholder='Email' type='email'>
<input id='senha' placeholder='Senha' type='password'>

<button onclick='registrar()'>Registrar</button>

<p style='text-align:center;margin-top:10px'><a href='login.html' style='color:#00ffff'>Já tenho conta</a></p>

</div>

<script>

function registrar(){
  const nome = document.getElementById('nome').value.trim();
  const email = document.getElementById('email').value.trim();
  const senha = document.getElementById('senha').value.trim();
  if(!nome || !email || !senha){ alert('Preencha todos os campos'); return; }

  // Comunicação com o backend PHP
  fetch('registrar.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: `nome=${encodeURIComponent(nome)}&email=${encodeURIComponent(email)}&senha=${encodeURIComponent(senha)}`
  })
  .then(response => response.json())
  .then(data => {
      alert(data.message);
      if(data.success) {
          window.location.href='login.html';
      }
  })
  .catch(error => {
      console.error('Erro de comunicação:', error);
      alert('Erro de comunicação com o servidor. Verifique o XAMPP.');
  });
}
</script>
</body></html>